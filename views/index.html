<html lang="en">
    <meta charset="UTF-8">
    <meta name="viewprt" content="width=device-width, initial-scale-1">
    <script src="https://unpkg.com/htmx.org@1.9.11" integrity="sha384-0gxUXCCR8yv9FM2b+U3FDbsKthCI66oH5IA9fHppQq9DDMHuMauqq1ZHBpJxQ0J0" crossorigin="anonymous"></script>
    <link href="/styles" rel="stylesheet">
    <title>JoistCalc</title>
  </head>
  <body>

    <header class="segment">
      <h1>Joist Calc</h1>
    </header>

    <input 
	hx-trigger="keyup changed delay: 1s"
	hx-post="/dataEnter"
	type="text" 
	palcehoder="test input">
    
    <div class="Geometry">
        <div id="trussType">
	    Truss Type: 
	    <select>
		<option>warren</option>
		<option>warren modified</option>
	    </select>
	</div>
        <div id="joistType">
	    Joist Type:
	    <select>
		<option>roof</option>
		<option>mezzanine</option>
	    </select>
	</div>
	<div id="deflexion">
	    Deflexion:
	    <select>
		<option>240</option>
		<option>360</option>
	    </select>
	</div>
        <div id="span">
	    span:
	    <input
		type="number"
		placeholder="feets"
		onkeyup="Lcalculation()"
		id="spanInput"
		/>
	</div>
        <div id="d">
	    d:
	    <input type="number" placeholder="inches"/>
	</div>
        <div >
	    Lep1:
	    <input
		type="number"
		placeholder="inches"
		onkeyup="lbe2Calculation()"
		id="Lep1"
		/>
	</div>
        <div id="lep2">
	    Lep2:
	    <input
		type="number"
		placeholder="inches"
		onkeyup="lbe2Calculation()"
		id="Lep2"
		/>
	</div>
        <div id="lip">
	    Lip:
	    <input
		type="number"
		placeholder="inches"
		onkeyup="lbe2Calculation()"
		id="Lip"
		/>
	</div>
        <div id="lbe">
	    Lbe:
	    <input
		type="number"
		placeholder="inches"
		onkeyup="lbe2Calculation()"
		id="Lbe"
		/>
	</DIv>
        <div id="lbe2">
	    Lbe2:
	    <input id="Lbe2" disabled/>
	</div>
        <div id="l">
	    L:
	    <input id="L" disabled/>
	</div>
        <div id="ip">
	    IP:
	    <input id="IPInput" disabled/>
	</div>
        <div id="w">
	    W:
	    <input id="WInput" disabled/>
	</div>
        <div id="v">
	    V:
	    <input id="VInput" disabled/>
	</div>
        <div id="de">
	    de:
	    <input id="deInput" disabled/>
	</div>
    </div>
    
    <div>
      <form name="myform">
	<label>value 1</label>
	<input type="number" name="qty" onkeyup="calculate()"/> <br/>
	<label>value 2</label>
	<input type="number" name="Cost" onkeyup="calculate()"/> <br/>
	<label>results</label>
	<input type="text" name="textbox5"/>
      </form>
    </div> 
  </body>
  <script>
      function IPCalculation(){
	  let spanInput = document.getElementById("spanInput").value*1
	  let Linput = document.getElementById("L")
	  L = spanInput*12-4
	  Linput.value = L

	  let Lep1 = document.getElementById("Lep1").value*1
	  let Lep2 = document.getElementById("Lep2").value*1
	  let Lip = document.getElementById("Lip").value*1

	  let IP = document.getElementById("IPInput")
	  let V = document.getElementById("VInput")

	  let restL = L - (Lep1 + Lep2) * 2
	  IPValue = restL / Lip
	  IP.value = IPValue 
	  V.value = IPValue / 2
	  console.log(IP.value)
      }
      function calculate(){
	  if(isNaN(document.forms["myform"]["qty"].value) || document.forms["myform"]["qty"].value==""){
	      var text1 = 0;
	  }else{
	      var text1 = parseInt(document.forms["myform"]["qty"].value);
	  }

	  if(isNaN(document.forms["myform"]["Cost"].value) || document.forms["myform"]["Cost"].value==""){
	      var text2 = 0;
	  }else{
	      var text2 = parseFloat(document.forms["myform"]["Cost"].value);
	  }
	  document.forms["myform"]["textbox5"].value = (text1*text2);
      }

      function lbe2Calculation(){
	  // Lbe2 = Lep1+Lep2+Lip-Lbe
	  let Lbe2Input = document.getElementById("Lbe2")
	  let Lep1Input = document.getElementById("Lep1")
	  let Lep2Input = document.getElementById("Lep2")
	  let LipInput = document.getElementById("Lip")
	  let LbeInput = document.getElementById("Lbe")

	  let Lbe2 = Lep1Input.value*1 + Lep2Input.value*1 + LipInput.value*1 - LbeInput.value*1;
	  Lbe2 = Lbe2*1;
	  Lbe2Input.value = Lbe2.toFixed(2)
	  IPCalculation()
      }

      function Lcalculation(){
	  // L = span-4inches
	  let spanInput = document.getElementById("spanInput")
	  let a = spanInput.value

	  let Linput = document.getElementById("L")
	  L = spanInput.value*1*12-4
	  Linput.value = L

	  IPCalculation()
      }
  </script>
<html>
